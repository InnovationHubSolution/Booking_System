import { socketService } from './socketService'; \n\ninterface Notification { \n    id: string; \n    type: 'info' | 'success' | 'warning' | 'error'; \n    title: string; \n    message: string; \n    timestamp: Date; \n    userId ?: string; \n    read ?: boolean; \n    data ?: any; \n } \n\nclass NotificationService { \n    private notifications: Notification[] = []; \n    private listeners: Array<(notifications: Notification[]) => void> = []; \n\n    constructor() { \n        this.setupSocketListeners(); \n } \n\n    private setupSocketListeners() { \n        // Listen for real-time notifications\n        socketService.on('notification:new', (data) => {\n            this.addNotification(data);\n        });\n\n        // Listen for booking updates\n        socketService.onBookingUpdate((data) => {\n            this.addNotification({\n                id: Date.now().toString(),\n                type: 'info',\n                title: 'Booking Updated',\n                message: `Booking ${data.reservationNumber} has been updated`,\n                timestamp: new Date(),\n                data\n            });\n        });\n\n        // Listen for new bookings (admin/host)\n        socketService.onNewBooking((data) => {\n            this.addNotification({\n                id: Date.now().toString(),\n                type: 'success',\n                title: 'New Booking',\n                message: `New booking received: ${data.reservationNumber}`,\n                timestamp: new Date(),\n                data\n            });\n        });\n\n        // Listen for payment updates\n        socketService.onPaymentUpdate((data) => {\n            this.addNotification({\n                id: Date.now().toString(),\n                type: data.status === 'paid' ? 'success' : 'info',\n                title: 'Payment Update',\n                message: `Payment ${data.status} for booking ${data.bookingId}`,\n                timestamp: new Date(),\n                data\n            });\n        });\n    }\n\n    public addNotification(notification: Partial<Notification>) {\n        const newNotification: Notification = {\n            id: notification.id || Date.now().toString(),\n            type: notification.type || 'info',\n            title: notification.title || 'Notification',\n            message: notification.message || '',\n            timestamp: notification.timestamp || new Date(),\n            read: false,\n            ...notification\n        };\n\n        this.notifications.unshift(newNotification);\n        \n        // Keep only last 50 notifications\n        if (this.notifications.length > 50) {\n            this.notifications = this.notifications.slice(0, 50);\n        }\n\n        this.notifyListeners();\n        \n        // Auto-remove notification after 5 seconds for UI toasts\n        if (notification.type !== 'error') {\n            setTimeout(() => {\n                this.removeNotification(newNotification.id);\n            }, 5000);\n        }\n    }\n\n    public removeNotification(id: string) {\n        this.notifications = this.notifications.filter(n => n.id !== id);\n        this.notifyListeners();\n    }\n\n    public markAsRead(id: string) {\n        const notification = this.notifications.find(n => n.id === id);\n        if (notification) {\n            notification.read = true;\n            this.notifyListeners();\n        }\n    }\n\n    public markAllAsRead() {\n        this.notifications.forEach(n => n.read = true);\n        this.notifyListeners();\n    }\n\n    public getNotifications(): Notification[] {\n        return this.notifications;\n    }\n\n    public getUnreadCount(): number {\n        return this.notifications.filter(n => !n.read).length;\n    }\n\n    public subscribe(listener: (notifications: Notification[]) => void) {\n        this.listeners.push(listener);\n        \n        // Return unsubscribe function\n        return () => {\n            this.listeners = this.listeners.filter(l => l !== listener);\n        };\n    }\n\n    private notifyListeners() {\n        this.listeners.forEach(listener => listener(this.notifications));\n    }\n\n    // Predefined notification types\n    public notifyBookingConfirmed(bookingNumber: string, serviceName: string) {\n        this.addNotification({\n            type: 'success',\n            title: 'Booking Confirmed! ðŸŽ‰',\n            message: `Your booking ${bookingNumber} for ${serviceName} has been confirmed.`\n        });\n    }\n\n    public notifyPaymentReceived(amount: string, currency: string) {\n        this.addNotification({\n            type: 'success',\n            title: 'Payment Received ðŸ’³',\n            message: `Payment of ${amount} ${currency} has been processed successfully.`\n        });\n    }\n\n    public notifyCheckInSuccess(serviceName: string) {\n        this.addNotification({\n            type: 'success',\n            title: 'Check-in Successful âœ…',\n            message: `You've successfully checked in for ${serviceName}. Enjoy your experience!`\n        });\n    }\n\n    public notifyBookingCancelled(bookingNumber: string) {\n        this.addNotification({\n            type: 'info',\n            title: 'Booking Cancelled ðŸ“…',\n            message: `Booking ${bookingNumber} has been cancelled. Refund will be processed if applicable.`\n        });\n    }\n\n    public notifyNewMessage(senderName: string) {\n        this.addNotification({\n            type: 'info',\n            title: 'New Message ðŸ’¬',\n            message: `You have a new message from ${senderName}`\n        });\n    }\n\n    public notifySystemMaintenance(message: string) {\n        this.addNotification({\n            type: 'warning',\n            title: 'System Maintenance ðŸ”§',\n            message\n        });\n    }\n\n    public notifyError(title: string, message: string) {\n        this.addNotification({\n            type: 'error',\n            title,\n            message\n        });\n    }\n\n    // Clear all notifications\n    public clearAll() {\n        this.notifications = [];\n        this.notifyListeners();\n    }\n\n    // Send notification to another user (admin/host feature)\n    public sendNotificationToUser(targetUserId: string, notification: Partial<Notification>) {\n        if (socketService.isConnected()) {\n            socketService.sendNotification(targetUserId, notification);\n        }\n    }\n\n    // Broadcast notification to all users (admin only)\n    public broadcastNotification(notification: Partial<Notification>) {\n        if (socketService.isConnected()) {\n            socketService.broadcastNotification(notification);\n        }\n    }\n}\n\n// Create and export singleton instance\nexport const notificationService = new NotificationService();\nexport default notificationService;\n\n// Export types for use in components\nexport type { Notification };"